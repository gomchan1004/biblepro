<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ì„±ê²½ ì•”ì†¡ ì—°ìŠµ</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 600px; margin: 30px auto; padding: 0 10px; }
  #verse { font-size: 1.2em; margin-bottom: 15px; }
  #result span { font-weight: bold; }
  #result span.green { color: green; }
  #result span.red { color: red; }
  #correctVerse { margin-top: 10px; font-weight: bold; background: #f0f0f0; padding: 10px; border-radius: 5px; }
  button { margin-right: 10px; margin-top: 10px; padding: 8px 15px; }
  #score { margin-top: 10px; font-size: 1.1em; }
  #userInput { width: 100%; height: 60px; font-size: 1em; padding: 5px; }
  .length-filter button { margin-bottom: 15px; }
</style>
</head>
<body>

<h1>ì„±ê²½ ì•”ì†¡ ì—°ìŠµ</h1>

<div class="length-filter">
  <button onclick="setVerseLength('all')">ì „ì²´ êµ¬ì ˆ</button>
  <button onclick="setVerseLength('short')">ì§§ì€ êµ¬ì ˆ (60ì ì´í•˜)</button>
  <button onclick="setVerseLength('long')">ê¸´ êµ¬ì ˆ (60ì ì´ìƒ)</button>
</div>

<div id="verse"></div>

<textarea id="userInput" placeholder="ì—¬ê¸°ì— ì•”ì†¡í•œ êµ¬ì ˆì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>

<div>
  <button id="checkBtn" onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
  <button id="nextBtn" onclick="nextVerse()">ë‹¤ìŒ êµ¬ì ˆ</button>
  <button id="readBtn" onclick="readVerse()">ìŒì„± ì½ê¸°</button>
</div>

<div id="result"></div>
<div id="correctVerse"></div>
<div id="score">ì ìˆ˜: 0</div>
  
<script>
const verses = [
  {"text":"í•˜ë‚˜ë‹˜ì´ ì´ë¥´ì‹œë˜ ìš°ë¦¬ì˜ í˜•ìƒì„ ë”°ë¼ ìš°ë¦¬ì˜ ëª¨ì–‘ëŒ€ë¡œ ìš°ë¦¬ê°€ ì‚¬ëŒì„ ë§Œë“¤ê³  ê·¸ë“¤ë¡œ ë°”ë‹¤ì˜ ë¬¼ê³ ê¸°ì™€ í•˜ëŠ˜ì˜ ìƒˆì™€ ê°€ì¶•ê³¼ ì˜¨ ë•…ê³¼ ë•…ì— ê¸°ëŠ” ëª¨ë“  ê²ƒì„ ë‹¤ìŠ¤ë¦¬ê²Œ í•˜ì í•˜ì‹œê³ ","reference":"ì°½ì„¸ê¸° 1ì¥ 26ì ˆ"},
  {"text":"ì—¬í˜¸ì™€ê»˜ì„œ ê·¸ì˜ ì•ìœ¼ë¡œ ì§€ë‚˜ì‹œë©° ì„ í¬í•˜ì‹œë˜ ì—¬í˜¸ì™€ë¼ ì—¬í˜¸ì™€ë¼ ìë¹„ë¡­ê³  ì€í˜œë¡­ê³  ë…¸í•˜ê¸°ë¥¼ ë”ë””í•˜ê³  ì¸ìì™€ ì§„ì‹¤ì´ ë§ì€ í•˜ë‚˜ë‹˜ì´ë¼","reference":"ì¶œì• êµ½ê¸° 34ì¥ 6ì ˆ"},
  {"text":"ë‚˜ëŠ” ë„ˆí¬ì˜ í•˜ë‚˜ë‹˜ì´ ë˜ë ¤ê³  ë„ˆí¬ë¥¼ ì• êµ½ ë•…ì—ì„œ ì¸ë„í•˜ì—¬ ë‚¸ ì—¬í˜¸ì™€ë¼ ë‚´ê°€ ê±°ë£©í•˜ë‹ˆ ë„ˆí¬ë„ ê±°ë£©í• ì§€ì–´ë‹¤","reference":"ë ˆìœ„ê¸° 11ì¥ 45ì ˆ"},
  {"text":"ì´ìŠ¤ë¼ì—˜ì•„ ë“¤ìœ¼ë¼ ìš°ë¦¬ í•˜ë‚˜ë‹˜ ì—¬í˜¸ì™€ëŠ” ì˜¤ì§ ìœ ì¼í•œ ì—¬í˜¸ì™€ì´ì‹œë‹ˆ","reference":"ì‹ ëª…ê¸° 6ì¥ 4ì ˆ"},
  {"text":"ë‚˜ëŠ” ë„ˆí¬ë¥¼ ìœ„í•˜ì—¬ ê¸°ë„í•˜ê¸°ë¥¼ ì‰¬ëŠ” ì£„ë¥¼ ì—¬í˜¸ì™€ ì•ì— ê²°ë‹¨ì½” ë²”í•˜ì§€ ì•„ë‹ˆí•˜ê³  ì„ í•˜ê³  ì˜ë¡œìš´ ê¸¸ì„ ë„ˆí¬ì—ê²Œ ê°€ë¥´ì¹  ê²ƒì¸ì¦‰","reference":"ì‚¬ë¬´ì—˜ìƒ 12ì¥ 23ì ˆ"},
  {"text":"ì‚¬ë¬´ì—˜ì´ ì´ë¥´ë˜ ì—¬í˜¸ì™€ê»˜ì„œ ë²ˆì œì™€ ë‹¤ë¥¸ ì œì‚¬ë¥¼ ê·¸ì˜ ëª©ì†Œë¦¬ë¥¼ ì²­ì¢…í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ì‹¬ ê°™ì´ ì¢‹ì•„í•˜ì‹œê² ë‚˜ì´ê¹Œ ìˆœì¢…ì´ ì œì‚¬ë³´ë‹¤ ë‚«ê³  ë“£ëŠ” ê²ƒì´ ìˆ«ì–‘ì˜ ê¸°ë¦„ë³´ë‹¤ ë‚˜ìœ¼ë‹ˆ","reference":"ì‚¬ë¬´ì—˜ìƒ 15ì¥ 22ì ˆ"},
  {"text":"ì—ìŠ¤ë¼ê°€ ì—¬í˜¸ì™€ì˜ ìœ¨ë²•ì„ ì—°êµ¬í•˜ì—¬ ì¤€í–‰í•˜ë©° ìœ¨ë¡€ì™€ ê·œë¡€ë¥¼ ì´ìŠ¤ë¼ì—˜ì—ê²Œ ê°€ë¥´ì¹˜ê¸°ë¡œ ê²°ì‹¬í•˜ì˜€ì—ˆë”ë¼","reference":"ì—ìŠ¤ë¼ 7ì¥ 10ì ˆ"},
  {"text":"ì´ë¥´ë˜ ë‚´ê°€ ëª¨íƒœì—ì„œ ì•Œëª¸ìœ¼ë¡œ ë‚˜ì™”ì‚¬ì˜¨ì¦‰ ë˜í•œ ì•Œëª¸ì´ ê·¸ë¦¬ë¡œ ëŒì•„ê°€ì˜¬ì§€ë¼ ì£¼ì‹  ì´ë„ ì—¬í˜¸ì™€ì‹œìš” ê±°ë‘ì‹  ì´ë„ ì—¬í˜¸ì™€ì‹œì˜¤ë‹ˆ ì—¬í˜¸ì™€ì˜ ì´ë¦„ì´ ì°¬ì†¡ì„ ë°›ìœ¼ì‹¤ì§€ë‹ˆì´ë‹¤ í•˜ê³ ","reference":"ìš¥ê¸° 1ì¥ 21ì ˆ"},
  {"text":"ë³µ ìˆëŠ” ì‚¬ëŒì€ ì•…ì¸ë“¤ì˜ ê¾€ë¥¼ ë”°ë¥´ì§€ ì•„ë‹ˆí•˜ë©° ì£„ì¸ë“¤ì˜ ê¸¸ì— ì„œì§€ ì•„ë‹ˆí•˜ë©° ì˜¤ë§Œí•œ ìë“¤ì˜ ìë¦¬ì— ì•‰ì§€ ì•„ë‹ˆí•˜ê³ ","reference":"ì‹œí¸ 1í¸ 1ì ˆ"},
  {"text":"ë„ˆëŠ” ë§ˆìŒì„ ë‹¤í•˜ì—¬ ì—¬í˜¸ì™€ë¥¼ ì‹ ë¢°í•˜ê³  ë„¤ ëª…ì² ì„ ì˜ì§€í•˜ì§€ ë§ë¼","reference":"ì ì–¸ 3ì¥ 5ì ˆ"},
  {"text":"ì—¬í˜¸ì™€ë¥¼ ê²½ì™¸í•˜ëŠ” ê²ƒì´ ì§€í˜œì˜ ê·¼ë³¸ì´ìš” ê±°ë£©í•˜ì‹  ìë¥¼ ì•„ëŠ” ê²ƒì´ ëª…ì² ì´ë‹ˆë¼","reference":"ì ì–¸ 9ì¥ 10ì ˆ"},
  {"text":"ë„ˆëŠ” ì²­ë…„ì˜ ë•Œì— ë„ˆì˜ ì°½ì¡°ì£¼ë¥¼ ê¸°ì–µí•˜ë¼ ê³§ ê³¤ê³ í•œ ë‚ ì´ ì´ë¥´ê¸° ì „ì—, ë‚˜ëŠ” ì•„ë¬´ ë‚™ì´ ì—†ë‹¤ê³  í•  í•´ë“¤ì´ ê°€ê¹ê¸° ì „ì—","reference":"ì „ë„ì„œ 12ì¥ 1ì ˆ"},
  {"text":"ë„ˆëŠ” ë‚˜ë¥¼ ë„ì¥ ê°™ì´ ë§ˆìŒì— í’ˆê³  ë„ì¥ ê°™ì´ íŒ”ì— ë‘ë¼ ì‚¬ë‘ì€ ì£½ìŒ ê°™ì´ ê°•í•˜ê³  ì§ˆíˆ¬ëŠ” ìŠ¤ëª° ê°™ì´ ì”ì¸í•˜ë©° ë¶ˆê¸¸ ê°™ì´ ì¼ì–´ë‚˜ë‹ˆ ê·¸ ê¸°ì„¸ê°€ ì—¬í˜¸ì™€ì˜ ë¶ˆê³¼ ê°™ìœ¼ë‹ˆë¼","reference":"ì•„ê°€ 8ì¥ 6ì ˆ"},
  {"text":"ê·¸ëŸ¬ë¯€ë¡œ ì£¼ê»˜ì„œ ì¹œíˆ ì§•ì¡°ë¥¼ ë„ˆí¬ì—ê²Œ ì£¼ì‹¤ ê²ƒì´ë¼ ë³´ë¼ ì²˜ë…€ê°€ ì‰íƒœí•˜ì—¬ ì•„ë“¤ì„ ë‚³ì„ ê²ƒì´ìš” ê·¸ì˜ ì´ë¦„ì„ ì„ë§ˆëˆ„ì—˜ì´ë¼ í•˜ë¦¬ë¼","reference":"ì´ì‚¬ì•¼ 7ì¥ 14ì ˆ"},
  {"text":"ì´ëŠ” í•œ ì•„ê¸°ê°€ ìš°ë¦¬ì—ê²Œ ë‚¬ê³  í•œ ì•„ë“¤ì„ ìš°ë¦¬ì—ê²Œ ì£¼ì‹  ë°” ë˜ì—ˆëŠ” ë° ê·¸ì˜ ì–´ê¹¨ì—ëŠ” ì •ì‚¬ë¥¼ ë©”ì—ˆê³  ê·¸ì˜ ì´ë¦„ì€ ê¸°ë¬˜ìë¼, ëª¨ì‚¬ë¼, ì „ëŠ¥í•˜ì‹  í•˜ë‚˜ë‹˜ì´ë¼, ì˜ì¡´í•˜ì‹œëŠ” ì•„ë²„ì§€ë¼, í‰ê°•ì˜ ì™•ì´ë¼ í•  ê²ƒì„ì´ë¼","reference":"ì´ì‚¬ì•¼ 9ì¥ 6ì ˆ"},
  {"text":"ê·¸ê°€ ì°”ë¦¼ì€ ìš°ë¦¬ì˜ í—ˆë¬¼ ë•Œë¬¸ì´ìš” ê·¸ê°€ ìƒí•¨ì€ ìš°ë¦¬ì˜ ì£„ì•… ë•Œë¬¸ì´ë¼ ê·¸ê°€ ì§•ê³„ë¥¼ ë°›ìœ¼ë¯€ë¡œ ìš°ë¦¬ëŠ” í‰í™”ë¥¼ ëˆ„ë¦¬ê³  ê·¸ê°€ ì±„ì°ì— ë§ìœ¼ë¯€ë¡œ ìš°ë¦¬ëŠ” ë‚˜ìŒì„ ë°›ì•˜ë„ë‹¤","reference":"ì´ì‚¬ì•¼ 53ì¥ 5ì ˆ"},
  {"text":"ë„ˆí¬ëŠ” ì˜ˆë£¨ì‚´ë ˜ ê±°ë¦¬ë¡œ ë¹¨ë¦¬ ë‹¤ë‹ˆë©° ê·¸ ë„“ì€ ê±°ë¦¬ì—ì„œ ì°¾ì•„ë³´ê³  ì•Œë¼ ë„ˆí¬ê°€ ë§Œì¼ ì •ì˜ë¥¼ í–‰í•˜ë©° ì§„ë¦¬ë¥¼ êµ¬í•˜ëŠ” ìë¥¼ í•œ ì‚¬ëŒì´ë¼ë„ ì°¾ìœ¼ë©´ ë‚´ê°€ ì´ì„±ìì„ ìš©ì„œí•˜ë¦¬ë¼","reference":"ì˜ˆë ˆë¯¸ì•¼ 5ì¥ 1ì ˆ"},
  {"text":"ë˜ ìƒˆ ì˜ì„ ë„ˆí¬ ì†ì— ë‘ê³  ìƒˆ ë§ˆìŒì„ ë„ˆí¬ì—ê²Œ ì£¼ë˜ ë„ˆí¬ ìœ¡ì‹ ì—ì„œ êµ³ì€ ë§ˆìŒì„ ì œê±°í•˜ê³  ë¶€ë“œëŸ¬ìš´ ë§ˆìŒì„ ì¤„ ê²ƒì´ë©°","reference":"ì—ìŠ¤ê²” 36ì¥ 26ì ˆ"},
  {"text":"ì˜¤ë¼ ìš°ë¦¬ê°€ ì—¬í˜¸ì™€ê»˜ë¡œ ëŒì•„ê°€ì ì—¬í˜¸ì™€ê»˜ì„œ ìš°ë¦¬ë¥¼ ì°¢ìœ¼ì…¨ìœ¼ë‚˜ ë„ë¡œ ë‚«ê²Œ í•˜ì‹¤ ê²ƒì´ìš” ìš°ë¦¬ë¥¼ ì¹˜ì…¨ìœ¼ë‚˜ ì‹¸ë§¤ì–´ ì£¼ì‹¤ ê²ƒì„ì´ë¼","reference":"í˜¸ì„¸ì•„ 6ì¥ 1ì ˆ"},
  {"text":"ê·¸ í›„ì— ë‚´ê°€ ë‚´ ì˜ì„ ë§Œë¯¼ì—ê²Œ ë¶€ì–´ ì£¼ë¦¬ë‹ˆ ë„ˆí¬ ìë…€ë“¤ì´ ì¥ë˜ ì¼ì„ ë§í•  ê²ƒì´ë©° ë„ˆí¬ ëŠ™ì€ì´ëŠ” ê¿ˆì„ ê¾¸ë©° ë„ˆí¬ ì Šì€ì´ëŠ” ì´ìƒì„ ë³¼ ê²ƒì´ë©°","reference":"ìš”ì—˜ 2ì¥ 28ì ˆ"},
  {"text":"ì˜¤ì§ ì •ì˜ë¥¼ ë¬¼ ê°™ì´, ê³µì˜ë¥¼ ë§ˆë¥´ì§€ ì•ŠëŠ” ê°• ê°™ì´ íë¥´ê²Œ í• ì§€ì–´ë‹¤","reference":"ì•„ëª¨ìŠ¤ 5ì¥ 24ì ˆ"},
  {"text":"ì‚¬ëŒì•„ ì£¼ê»˜ì„œ ì„ í•œ ê²ƒì´ ë¬´ì—‡ì„ì„ ë„¤ê²Œ ë³´ì´ì…¨ë‚˜ë‹ˆ ì—¬í˜¸ì™€ê»˜ì„œ ë„¤ê²Œ êµ¬í•˜ì‹œëŠ” ê²ƒì€ ì˜¤ì§ ì •ì˜ë¥¼ í–‰í•˜ë©° ì¸ìë¥¼ ì‚¬ë‘í•˜ë©° ê²¸ì†í•˜ê²Œ ë„¤ í•˜ë‚˜ë‹˜ê³¼ í•¨ê»˜ í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆëƒ","reference":"ë¯¸ê°€ 6ì¥ 8ì ˆ"},
  {"text":"ë„ˆì˜ í•˜ë‚˜ë‹˜ ì—¬í˜¸ì™€ê°€ ë„ˆì˜ ê°€ìš´ë°ì— ê³„ì‹œë‹ˆ ê·¸ëŠ” êµ¬ì›ì„ ë² í‘¸ì‹¤ ì „ëŠ¥ìì´ì‹œë¼ ê·¸ê°€ ë„ˆë¡œ ë§ë¯¸ì•”ì•„ ê¸°ì¨ì„ ì´ê¸°ì§€ ëª»í•˜ì‹œë©° ë„ˆë¥¼ ì ì íˆ ì‚¬ë‘í•˜ì‹œë©° ë„ˆë¡œ ë§ë¯¸ì•”ì•„ ì¦ê±°ì´ ë¶€ë¥´ë©° ê¸°ë»í•˜ì‹œë¦¬ë¼ í•˜ë¦¬ë¼","reference":"ìŠ¤ë°”ëƒ 3ì¥ 17ì ˆ"},
  {"text":"ì‹œì˜¨ì˜ ë”¸ì•„ í¬ê²Œ ê¸°ë»í• ì§€ì–´ë‹¤ ì˜ˆë£¨ì‚´ë ˜ì˜ ë”¸ì•„ ì¦ê±°ì´ ë¶€ë¥¼ì§€ì–´ë‹¤ ë³´ë¼ ë„¤ ì™•ì´ ë„¤ê²Œ ì„í•˜ì‹œë‚˜ë‹ˆ ê·¸ëŠ” ê³µì˜ë¡œìš°ì‹œë©° êµ¬ì›ì„ ë² í‘¸ì‹œë©° ê²¸ì†í•˜ì—¬ì„œ ë‚˜ê·€ë¥¼ íƒ€ì‹œë‚˜ë‹ˆ ë‚˜ê·€ì˜ ì‘ì€ ê²ƒ ê³§ ë‚˜ê·€ ìƒˆë¼ë‹ˆë¼","reference":"ìŠ¤ê°€ë´ 9ì¥ 9ì ˆ"},
  {"text":"ë‚´ ì´ë¦„ì„ ê²½ì™¸í•˜ëŠ” ë„ˆí¬ì—ê²ŒëŠ” ê³µì˜ë¡œìš´ í•´ê°€ ë– ì˜¬ë¼ì„œ ì¹˜ë£Œí•˜ëŠ” ê´‘ì„ ì„ ë¹„ì¶”ë¦¬ë‹ˆ ë„ˆí¬ê°€ ë‚˜ê°€ì„œ ì™¸ì–‘ê°„ì—ì„œ ë‚˜ì˜¨ ì†¡ì•„ì§€ ê°™ì´ ë›°ë¦¬ë¼","reference":"ë§ë¼ê¸° 4ì¥ 2ì ˆ"},
  {"text":"ë˜ ë‚´ê°€ ë„¤ê²Œ ì´ë¥´ë…¸ë‹ˆ ë„ˆëŠ” ë² ë“œë¡œë¼ ë‚´ê°€ ì´ ë°˜ì„ ìœ„ì— ë‚´ êµíšŒë¥¼ ì„¸ìš°ë¦¬ë‹ˆ ìŒë¶€ì˜ ê¶Œì„¸ê°€ ì´ê¸°ì§€ ëª»í•˜ë¦¬ë¼","reference":"ë§ˆíƒœë³µìŒ 16ì¥ 18ì ˆ"},
  {"text":"ì¸ìê°€ ì˜¨ ê²ƒì€ ì„¬ê¹€ì„ ë°›ìœ¼ë ¤ í•¨ì´ ì•„ë‹ˆë¼ ë„ë¦¬ì–´ ì„¬ê¸°ë ¤ í•˜ê³  ìê¸° ëª©ìˆ¨ì„ ë§ì€ ì‚¬ëŒì˜ ëŒ€ì†ë¬¼ë¡œ ì£¼ë ¤ í•¨ì´ë‹ˆë¼","reference":"ë§ˆê°€ë³µìŒ 10ì¥ 45ì ˆ"},
  {"text":"ë˜ ë¬´ë¦¬ì—ê²Œ ì´ë¥´ì‹œë˜ ì•„ë¬´ë“ ì§€ ë‚˜ë¥¼ ë”°ë¼ì˜¤ë ¤ê±°ë“  ìê¸°ë¥¼ ë¶€ì¸í•˜ê³  ë‚ ë§ˆë‹¤ ì œ ì‹­ìê°€ë¥¼ ì§€ê³  ë‚˜ë¥¼ ë”°ë¥¼ ê²ƒì´ë‹ˆë¼","reference":"ëˆ„ê°€ë³µìŒ 9ì¥ 23ì ˆ"},
  {"text":"ë‚˜ëŠ” í¬ë„ë‚˜ë¬´ìš” ë„ˆí¬ëŠ” ê°€ì§€ë¼ ê·¸ê°€ ë‚´ ì•ˆì—, ë‚´ê°€ ê·¸ ì•ˆì— ê±°í•˜ë©´ ì‚¬ëŒì´ ì—´ë§¤ë¥¼ ë§ì´ ë§ºë‚˜ë‹ˆ ë‚˜ë¥¼ ë– ë‚˜ì„œëŠ” ë„ˆí¬ê°€ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ìŒì´ë¼","reference":"ìš”í•œë³µìŒ 15ì¥ 5ì ˆ"},
  {"text":"ë‚´ê°€ ë‹¬ë ¤ê°ˆ ê¸¸ê³¼ ì£¼ ì˜ˆìˆ˜ê»˜ ë°›ì€ ì‚¬ëª… ê³§ í•˜ë‚˜ë‹˜ì˜ ì€í˜œì˜ ë³µìŒì„ ì¦ì–¸í•˜ëŠ” ì¼ì„ ë§ˆì¹˜ë ¤ í•¨ì—ëŠ” ë‚˜ì˜ ìƒëª…ì¡°ì°¨ ì¡°ê¸ˆë„ ê·€í•œ ê²ƒìœ¼ë¡œ ì—¬ê¸°ì§€ ì•„ë‹ˆí•˜ë…¸ë¼","reference":"ì‚¬ë„í–‰ì „ 20ì¥ 24ì ˆ"},
  {"text":"ê·¸ê°€ ì£½ìœ¼ì‹¬ì€ ì£„ì— ëŒ€í•˜ì—¬ ë‹¨ë²ˆì— ì£½ìœ¼ì‹¬ì´ìš” ê·¸ê°€ ì‚´ì•„ ê³„ì‹¬ì€ í•˜ë‚˜ë‹˜ê»˜ ëŒ€í•˜ì—¬ ì‚´ì•„ ê³„ì‹¬ì´ë‹ˆ","reference":"ë¡œë§ˆì„œ 6ì¥ 10ì ˆ"},
  {"text":"í•˜ë‚˜ë‹˜ì´ ë¯¸ë¦¬ ì•„ì‹  ìë“¤ì„ ë˜í•œ ê·¸ ì•„ë“¤ì˜ í˜•ìƒì„ ë³¸ë°›ê²Œ í•˜ê¸° ìœ„í•˜ì—¬ ë¯¸ë¦¬ ì •í•˜ì…¨ìœ¼ë‹ˆ ì´ëŠ” ê·¸ë¡œ ë§ì€ í˜•ì œ ì¤‘ì—ì„œ ë§ì•„ë“¤ì´ ë˜ê²Œ í•˜ë ¤ í•˜ì‹¬ì´ë‹ˆë¼","reference":"ë¡œë§ˆì„œ 8ì¥ 29ì ˆ"},
  {"text":"ë„ˆí¬ëŠ” ì´ ì„¸ëŒ€ë¥¼ ë³¸ë°›ì§€ ë§ê³  ì˜¤ì§ ë§ˆìŒì„ ìƒˆë¡­ê²Œ í•¨ìœ¼ë¡œ ë³€í™”ë¥¼ ë°›ì•„ í•˜ë‚˜ë‹˜ì˜ ì„ í•˜ì‹œê³  ê¸°ë»í•˜ì‹œê³  ì˜¨ì „í•˜ì‹  ëœ»ì´ ë¬´ì—‡ì¸ì§€ ë¶„ë³„í•˜ë„ë¡ í•˜ë¼","reference":"ë¡œë§ˆì„œ 12ì¥ 2ì ˆ"},
  {"text":"ì‹­ìê°€ì˜ ë„ê°€ ë©¸ë§í•˜ëŠ” ìë“¤ì—ê²ŒëŠ” ë¯¸ë ¨í•œ ê²ƒì´ìš” êµ¬ì›ì„ ë°›ëŠ” ìš°ë¦¬ì—ê²ŒëŠ” í•˜ë‚˜ë‹˜ì˜ ëŠ¥ë ¥ì´ë¼","reference":"ê³ ë¦°ë„ì „ì„œ 1ì¥ 18ì ˆ"},
  {"text":"ê·¸ê°€ ëª¨ë“  ì‚¬ëŒì„ ëŒ€ì‹ í•˜ì—¬ ì£½ìœ¼ì‹¬ì€ ì‚´ì•„ ìˆëŠ” ìë“¤ë¡œ í•˜ì—¬ê¸ˆ ë‹¤ì‹œëŠ” ê·¸ë“¤ ìì‹ ì„ ìœ„í•˜ì—¬ ì‚´ì§€ ì•Šê³  ì˜¤ì§ ê·¸ë“¤ì„ ëŒ€ì‹ í•˜ì—¬ ì£½ì—ˆë‹¤ê°€ ë‹¤ì‹œ ì‚´ì•„ë‚˜ì‹  ì´ë¥¼ ìœ„í•˜ì—¬ ì‚´ê²Œ í•˜ë ¤ í•¨ì´ë¼","reference":"ê³ ë¦°ë„í›„ì„œ 5ì¥ 15ì ˆ"},
  {"text":"ë‚´ê°€ ê·¸ë¦¬ìŠ¤ë„ì™€ í•¨ê»˜ ì‹­ìê°€ì— ëª» ë°•í˜”ë‚˜ë‹ˆ ê·¸ëŸ°ì¦‰ ì´ì œëŠ” ë‚´ê°€ ì‚¬ëŠ” ê²ƒì´ ì•„ë‹ˆìš” ì˜¤ì§ ë‚´ ì•ˆì— ê·¸ë¦¬ìŠ¤ë„ê»˜ì„œ ì‚¬ì‹œëŠ” ê²ƒì´ë¼ ì´ì œ ë‚´ê°€ ìœ¡ì²´ ê°€ìš´ë° ì‚¬ëŠ” ê²ƒì€ ë‚˜ë¥¼ ì‚¬ë‘í•˜ì‚¬ ë‚˜ë¥¼ ìœ„í•˜ì—¬ ìê¸° ìì‹ ì„ ë²„ë¦¬ì‹  í•˜ë‚˜ë‹˜ì˜ ì•„ë“¤ì„ ë¯¿ëŠ” ë¯¿ìŒ ì•ˆì—ì„œ ì‚¬ëŠ” ê²ƒì´ë¼","reference":"ê°ˆë¼ë””ì•„ì„œ 2ì¥ 20ì ˆ"},
  {"text":"ë‚´ê°€ ì´ë¥´ë…¸ë‹ˆ ë„ˆí¬ëŠ” ì„±ë ¹ì„ ë”°ë¼ í–‰í•˜ë¼ ê·¸ë¦¬í•˜ë©´ ìœ¡ì²´ì˜ ìš•ì‹¬ì„ ì´ë£¨ì§€ ì•„ë‹ˆí•˜ë¦¬ë¼","reference":"ê°ˆë¼ë””ì•„ì„œ 5ì¥ 16ì ˆ"},
  {"text":"ë„ˆí¬ëŠ” ì‚¬ë„ë“¤ê³¼ ì„ ì§€ìë“¤ì˜ í„° ìœ„ì— ì„¸ìš°ì‹¬ì„ ì…ì€ ìë¼ ê·¸ë¦¬ìŠ¤ë„ ì˜ˆìˆ˜ê»˜ì„œ ì¹œíˆ ëª¨í‰ì‡ëŒì´ ë˜ì…¨ëŠë‹ˆë¼","reference":"ì—ë² ì†Œì„œ 2ì¥ 20ì ˆ"},
  {"text":"ë„ˆí¬ëŠ” ë‚´ê²Œ ë°°ìš°ê³  ë°›ê³  ë“£ê³  ë³¸ ë°”ë¥¼ í–‰í•˜ë¼ ê·¸ë¦¬í•˜ë©´ í‰ê°•ì˜ í•˜ë‚˜ë‹˜ì´ ë„ˆí¬ì™€ í•¨ê»˜ ê³„ì‹œë¦¬ë¼","reference":"ë¹Œë¦½ë³´ì„œ 4ì¥ 9ì ˆ"},
  {"text":"í•˜ë‚˜ë‹˜ì´ ê·¸ë“¤ë¡œ í•˜ì—¬ê¸ˆ ì´ ë¹„ë°€ì˜ ì˜ê´‘ì´ ì´ë°©ì¸ ê°€ìš´ë° ì–¼ë§ˆë‚˜ í’ì„±í•œì§€ë¥¼ ì•Œê²Œ í•˜ë ¤ í•˜ì‹¬ì´ë¼ ì´ ë¹„ë°€ì€ ë„ˆí¬ ì•ˆì— ê³„ì‹  ê·¸ë¦¬ìŠ¤ë„ì‹œë‹ˆ ê³§ ì˜ê´‘ì˜ ì†Œë§ì´ë‹ˆë¼","reference":"ê³¨ë¡œìƒˆì„œ 1ì¥ 27ì ˆ"},
  {"text":"ë˜ í˜•ì œë“¤ì•„ ë„ˆí¬ë¥¼ ê¶Œë©´í•˜ë…¸ë‹ˆ ê²Œìœ¼ë¥¸ ìë“¤ì„ ê¶Œê³„í•˜ë©° ë§ˆìŒì´ ì•½í•œ ìë“¤ì„ ê²©ë ¤í•˜ê³  í˜ì´ ì—†ëŠ” ìë“¤ì„ ë¶™ë“¤ì–´ ì£¼ë©° ëª¨ë“  ì‚¬ëŒì—ê²Œ ì˜¤ë˜ ì°¸ìœ¼ë¼","reference":"ë°ì‚´ë¡œë‹ˆê°€ì „ì„œ 5ì¥ 14ì ˆ"},
  {"text":"ëˆ„ê°€ ì–´ë–»ê²Œ í•˜ì—¬ë„ ë„ˆí¬ê°€ ë¯¸í˜¹ë˜ì§€ ë§ë¼ ë¨¼ì € ë°°êµí•˜ëŠ” ì¼ì´ ìˆê³  ì €ë¶ˆë²•ì˜ ì‚¬ëŒ ê³§ ë©¸ë§ì˜ ì•„ë“¤ì´ ë‚˜íƒ€ë‚˜ê¸° ì „ì—ëŠ” ê·¸ ë‚ ì´ ì´ë¥´ì§€ ì•„ë‹ˆí•˜ë¦¬ë‹ˆ","reference":"ë°ì‚´ë¡œë‹ˆê°€í›„ì„œ 2ì¥ 3ì ˆ"},
  {"text":"ë„¤ê°€ ë„¤ ìì‹ ê³¼ ê°€ë¥´ì¹¨ì„ ì‚´í´ ì´ ì¼ì„ ê³„ì†í•˜ë¼ ì´ê²ƒì„ í–‰í•¨ìœ¼ë¡œ ë„¤ ìì‹ ê³¼ ë„¤ê²Œ ë“£ëŠ” ìë¥¼ êµ¬ì›í•˜ë¦¬ë¼","reference":"ë””ëª¨ë°ì „ì„œ 4ì¥ 16ì ˆ"},
  {"text":"ëª¨ë“  ì„±ê²½ì€ í•˜ë‚˜ë‹˜ì˜ ê°ë™ìœ¼ë¡œ ëœ ê²ƒìœ¼ë¡œ êµí›ˆê³¼ ì±…ë§ê³¼ ë°”ë¥´ê²Œ í•¨ê³¼ ì˜ë¡œ êµìœ¡í•˜ê¸°ì— ìœ ìµí•˜ë‹ˆ","reference":"ë””ëª¨ë°í›„ì„œ 3ì¥ 16ì ˆ"},
  {"text":"ìš°ë¦¬ì—ê²Œ ìˆëŠ” ëŒ€ì œì‚¬ì¥ì€ ìš°ë¦¬ì˜ ì—°ì•½í•¨ì„ ë™ì •í•˜ì§€ ëª»í•˜ì‹¤ ì´ê°€ ì•„ë‹ˆìš” ëª¨ë“  ì¼ì— ìš°ë¦¬ì™€ ë˜‘ê°™ì´ ì‹œí—˜ì„ ë°›ìœ¼ì‹  ì´ë¡œë˜ ì£„ëŠ” ì—†ìœ¼ì‹œë‹ˆë¼","reference":"íˆë¸Œë¦¬ì„œ 4ì¥ 15ì ˆ"},
  {"text":"ë„¤ê°€ ë³´ê±°ë‹ˆì™€ ë¯¿ìŒì´ ê·¸ì˜ í–‰í•¨ê³¼ í•¨ê»˜ ì¼í•˜ê³  í–‰í•¨ìœ¼ë¡œ ë¯¿ìŒì´ ì˜¨ì „í•˜ê²Œ ë˜ì—ˆëŠë‹ˆë¼","reference":"ì•¼ê³ ë³´ì„œ 2ì¥ 22ì ˆ"},
  {"text":"ê·¸ëŸ¬ë‚˜ ë„ˆí¬ëŠ” íƒí•˜ì‹  ì¡±ì†ì´ìš” ì™• ê°™ì€ ì œì‚¬ì¥ë“¤ì´ìš” ê±°ë£©í•œ ë‚˜ë¼ìš” ê·¸ì˜ ì†Œìœ ê°€ ëœ ë°±ì„±ì´ë‹ˆ ì´ëŠ” ë„ˆí¬ë¥¼ ì–´ë‘ìš´ë°ì„œ ë¶ˆëŸ¬ë‚´ì–´ ê·¸ì˜ ê¸°ì´í•œ ë¹›ì— ë“¤ì–´ê°€ê²Œ í•˜ì‹  ì´ì˜ ì•„ë¦„ë‹¤ìš´ ë•ì„ ì„ í¬í•˜ê²Œ í•˜ë ¤ í•˜ì‹¬ì´ë¼","reference":"ë² ë“œë¡œì „ì„œ 2ì¥ 9ì ˆ"},
  {"text":"ì˜ˆì–¸ì€ ì–¸ì œë“ ì§€ ì‚¬ëŒì˜ ëœ»ìœ¼ë¡œ ë‚¸ ê²ƒì´ ì•„ë‹ˆìš” ì˜¤ì§ ì„±ë ¹ì˜ ê°ë™ í•˜ì‹¬ì„ ë°›ì€ ì‚¬ëŒë“¤ì´ í•˜ë‚˜ë‹˜ê»˜ ë°›ì•„ ë§í•œ ê²ƒì„ì´ë¼","reference":"ë² ë“œë¡œí›„ì„œ 1ì¥ 21ì ˆ"},
  {"text":"ìš°ë¦¬ê°€ ë³´ê³  ë“¤ì€ ë°”ë¥¼ ë„ˆí¬ì—ê²Œë„ ì „í•¨ì€ ë„ˆí¬ë¡œ ìš°ë¦¬ì™€ ì‚¬ê·ì´ ìˆê²Œ í•˜ë ¤ í•¨ì´ë‹ˆ ìš°ë¦¬ì˜ ì‚¬ê·ì€ ì•„ë²„ì§€ì™€ ê·¸ì˜ ì•„ë“¤ ì˜ˆìˆ˜ ê·¸ë¦¬ìŠ¤ë„ì™€ ë”ë¶ˆì–´ ëˆ„ë¦¼ì´ë¼","reference":"ìš”í•œì¼ì„œ 1ì¥ 3ì ˆ"},
  {"text":"ì£¼ í•˜ë‚˜ë‹˜ì´ ì´ë¥´ì‹œë˜ ë‚˜ëŠ” ì•ŒíŒŒì™€ ì˜¤ë©”ê°€ë¼ ì´ì œë„ ìˆê³  ì „ì—ë„ ìˆì—ˆê³  ì¥ì°¨ ì˜¬ ììš” ì „ëŠ¥í•œ ìë¼ í•˜ì‹œë”ë¼","reference":"ìš”í•œê³„ì‹œë¡ 1ì¥ 8ì ˆ"}
];

// ======== ìƒíƒœ ========
let currentVerse = null;
let score = 0;
let wrongVersesQueue = [];
let filteredVerses = [...verses];
let isSpeaking = false; // ìŒì„± ì¬ìƒ ìƒíƒœ

const verseDiv = document.getElementById("verse");
const userInput = document.getElementById("userInput");
const resultDiv = document.getElementById("result");
const correctVerseDiv = document.getElementById("correctVerse");
const scoreDiv = document.getElementById("score");
const checkBtn = document.getElementById("checkBtn");
const nextBtn = document.getElementById("nextBtn");
const readBtn = document.getElementById("readBtn");

// ======== êµ¬ì ˆ ê¸¸ì´ í•„í„° ========
function setVerseLength(length) {
  if(length==="short") filteredVerses = verses.filter(v=>v.text.length<=60);
  else if(length==="long") filteredVerses = verses.filter(v=>v.text.length>60);
  else filteredVerses = [...verses];
  // ìˆœì°¨ ì¸ë±ìŠ¤ ì´ˆê¸°í™”
  nextVerse.index = 0;
  // ì´ˆê¸°í™”ëœ ìƒíƒœì—ì„œ ë°”ë¡œ ì²« ë¬¸ì œ í‘œì‹œ
  nextVerse();
}

// ======== ë‹¤ìŒ êµ¬ì ˆ (ìˆœì°¨ì : ì‚¬ìš©ì ë°ì´í„° ë°°ì—´ ìˆœì„œ ìœ ì§€) ========
function nextVerse(){
  userInput.value="";
  resultDiv.innerHTML="";
  correctVerseDiv.innerHTML="";

  // ë¨¼ì € ì˜¤ë‹µ íì— ë‚¨ì€ ë¬¸ì œë¥¼ ì¬ì¶œì œ
  if(wrongVersesQueue.length>0) {
    currentVerse = wrongVersesQueue.shift();
  } else {
    if (typeof nextVerse.index === "undefined") nextVerse.index = 0;
    // ìˆœì°¨ì ìœ¼ë¡œ ì§„í–‰, ëì— ë„ë‹¬í•˜ë©´ ì™„ë£Œ ë©”ì‹œì§€ í‘œì‹œí•˜ê³  ë²„íŠ¼ ë¹„í™œì„±í™”
    if (nextVerse.index >= filteredVerses.length) {
      verseDiv.textContent = "ğŸ‰ ëª¨ë“  êµ¬ì ˆì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!";
      currentVerse = null;
      checkBtn.disabled = true;
      nextBtn.disabled = true;
      readBtn.disabled = true;
      return;
    }
    currentVerse = filteredVerses[nextVerse.index];
    nextVerse.index++;
  }

  if(currentVerse) verseDiv.textContent = showPartialVerse(currentVerse.text) + " (" + currentVerse.reference + ")";
  isSpeaking = false; // ìŒì„± ìƒíƒœ ì´ˆê¸°í™”
  // ìƒíƒœ í‘œì‹œ
  const idx = Math.min(nextVerse.index, filteredVerses.length);
  resultDiv.textContent = `${idx}/${filteredVerses.length} ë¬¸ì œ ì¤‘`;
}

// ======== êµ¬ì ˆ ì¼ë¶€ë§Œ ë³´ì—¬ì£¼ê¸° ========
function showPartialVerse(text){
  // ì›ë³¸ ë¡œì§ ìœ ì§€: ê³µë°± ê¸°ì¤€ ë‹¨ì–´ ë¶„ë¦¬
  const words = text.trim().split(" ");
  if(words.length <= 3) return text;
  const middle = words.slice(1, -1).map(() => "â€¦").join(" ");
  return `${words[0]} ${middle} ${words[words.length-1]}`;
}

// ======== ë¬¸ìì—´ ì •ê·œí™”: ë„ì–´ì“°ê¸° ë° êµ¬ë‘ì  ë¬´ì‹œ ========
function normalizeText(t) {
  if (!t) return "";
  return t
    .replace(/\s+/g, "")                     // ëª¨ë“  ê³µë°± ì œê±°
    .replace(/[.,!?;:Â·â€¢"â€œâ€â€˜â€™'()\[\]{}â€”â€“â€¦]/g, "") // ì¼ë°˜ì  êµ¬ë‘ì  ì œê±°
    .normalize("NFC")                        // ìœ ë‹ˆì½”ë“œ ì •ê·œí™” (í•œê¸€ ì•ˆì •í™”)
    .toLowerCase();                          // ì†Œë¬¸ìí™” (ì˜ë¬¸ ëŒ€ë¹„)
}

// ======== ì •ë‹µ í™•ì¸ ========
function checkAnswer(){
  if(!currentVerse) return;
  const input = userInput.value.trim();
  const normalizedInput = normalizeText(input);
  const normalizedAnswer = normalizeText(currentVerse.text);

  if(normalizedInput === normalizedAnswer){
    resultDiv.innerHTML = "<span class='green'>ì •ë‹µ!</span>";
    score++;
    scoreDiv.textContent = `ì ìˆ˜: ${score}`;
  } else {
    // ìœ ì‚¬ë„ ê³„ì‚°: ê°„ë‹¨í•œ Levenshtein ê¸°ë°˜ ë¹„ìœ¨ (ì˜¤ì°¨ë¥¼ í—ˆìš©)
    const similarity = calcSimilarity(normalizedInput, normalizedAnswer);
    if (similarity >= 0.92 && normalizedInput.length > 0) {
      // ë§¤ìš° ê·¼ì ‘í•œ ê²½ìš°ì—ë„ ì •ë‹µìœ¼ë¡œ ì²˜ë¦¬ (ë„ì–´ì“°ê¸°Â·êµ¬ë‘ì  ì •ë„ ì°¨ì´)
      resultDiv.innerHTML = "<span class='green'>ì •ë‹µ! (ê±°ì˜ ì¼ì¹˜)</span>";
      score++;
      scoreDiv.textContent = `ì ìˆ˜: ${score}`;
    } else {
      resultDiv.innerHTML = "<span class='red'>í‹€ë ¸ìŠµë‹ˆë‹¤.</span>";
      correctVerseDiv.textContent = "ì •ë‹µ: " + currentVerse.text;
      wrongVersesQueue.push(currentVerse);
    }
  }
}

// ======== ìœ ì‚¬ë„ ê³„ì‚°: Levenshtein distance => 0..1 ìœ ì‚¬ë„ ë°˜í™˜ ========
function calcSimilarity(a, b) {
  if (a === b) return 1;
  if (a.length === 0 || b.length === 0) return 0;
  const dp = Array.from({length: a.length+1}, () => new Array(b.length+1).fill(0));
  for (let i=0; i<=a.length; i++) dp[i][0] = i;
  for (let j=0; j<=b.length; j++) dp[0][j] = j;
  for (let i=1; i<=a.length; i++){
    for (let j=1; j<=b.length; j++){
      const cost = a[i-1] === b[j-1] ? 0 : 1;
      dp[i][j] = Math.min(dp[i-1][j] + 1, dp[i][j-1] + 1, dp[i-1][j-1] + cost);
    }
  }
  const distance = dp[a.length][b.length];
  const maxLen = Math.max(a.length, b.length);
  return 1 - distance / maxLen;
}

// ======== ìŒì„± ì½ê¸° (í† ê¸€í˜•) ========
function readVerse(){
  if(!currentVerse) return;

  if(isSpeaking) {
    speechSynthesis.cancel();
    isSpeaking = false;
  } else {
    const utter = new SpeechSynthesisUtterance(currentVerse.text);
    utter.lang = "ko-KR";
    utter.onend = () => { isSpeaking = false; };
    speechSynthesis.speak(utter);
    isSpeaking = true;
  }
}

// ======== ì´ˆê¸° ì‹¤í–‰ ========
nextVerse();
</script>

</body>
</html>
